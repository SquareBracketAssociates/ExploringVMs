\pagelayout{\paperbackpage}

\usepackage{root/support/latex/sbabook/pharo-titlepage}

\usepackage{polyglossia}
\usepackage[useregional]{datetime2}

% extract info from git commit
% requires gitinfo2 2.0.7, and below fix needed until 2.0.8 released
\makeatletter
\let\THEDAY\@dtm@currentday
\let\THEMONTH\@dtm@currentmonth
\let\THEYEAR\@dtm@currentyear
\makeatother
\usepackage[local,missing=!,dirty=*]{gitinfo2}
\usepackage{xstring}% \IfEq and \StrCut
% a couple extensions...
\makeatletter
\newcommand\gitCommitInfo{%
  \IfEq{\gitRel}{}
    {\IfEq{\gitAbbrevHash}{!}% same as missing package option
      {}% no versioning info => no noise
      {\gitBranch\,@\,\texttt{\gitAbbrevHash\gitDirty}}}
    {\IfEq{\gitRoff}{0}
      {release \gitRel}
      {modified since \gitRel{} --- \gitBranch\,@\,\texttt{\gitAbbrevHash\gitDirty}}}}
\newcommand\gitdate{\DTMusedate{gitdate}}
\makeatother

\usepackage[normalem]{ulem} % for strikeout text (\sout{...})
\usepackage{graphicx}

\usepackage{url} % define and apply style to URLs
\def\url@sfstyle{\def\UrlFont{\sf}}
\urlstyle{sf}
\usepackage[
  unicode,
  breaklinks, hidelinks, % undecorated hyperlinks
  bookmarks, bookmarksdepth = subsubsection
]{hyperref}

% Lulu only supports PDF format version 1.3
\pdfminorversion=3

\usepackage{multicol}
\usepackage{multirow}

% a nice horizontal separator
\newcommand{\sectionline}{%
  \begin{center}\nointerlineskip
    \rule{0.233\linewidth}{.7pt}%
  \end{center}
}

% less space around lists
\tightlists

% showing code, inline and as blocks
\usepackage{lstsmalltalk}
\usepackage{lsthttp}
\lstdefinelanguage{plain}{}% verbatim, plain text

\lstalias{Pillar}{plain}
\lstalias{CSS}{plain}
\lstalias{JSON}{plain}
\lstalias{STON}{plain}
\lstalias{Javascript}{plain}
\lstalias{ShellCommands}{plain}

\lstset{
  language = smalltalk,
  tabsize = 3
}

% highlighted paragraphs
\newenvironment{note}{%
  \begin{leftbar}\textsf{\textbf{Note}}\quad
}{\end{leftbar}}

\newenvironment{todo}{%
  \begin{leftbar}\textsf{\textbf{To do}}\quad
}{\end{leftbar}}
